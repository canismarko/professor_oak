{% extends 'base.html' %}
{% load custom_filters %}
{% block title %}Current Inventory{% endblock %}

{% block content %}

<div class="row">
  <div class="col-md-6">
    <h2>Chemicals currently in your lab</h2>
  </div>
  <div class="col-md-6">
    <form method="get" action="." class="navbar-form pull-right">
      <div class="input-group">
	<input type="text" class="input-small form-control search-query"
	       name="search" placeholder="Name or formula..."
		   {% if active_search == None %}
			value=""
			{% else %}
	       value="{{ active_search }}"
		   {% endif %}>
	<span class="input-group-btn">
	  <input type="submit" class="btn btn-default" value="Search">
	</span>
      </div>
    </form>
  </div>
</div>

<p>
  <a href="{% url 'add_container' %}" class="btn btn-primary">Add chemical</a>
</p>

<ul class="nav nav-tabs glossarytabs" id="glossary">
    <li{% if not active_filter %} class="active"{% endif %}>
        <a href="{% url 'chemical_list' %}?search={{ search }}" data-id="all" >All</a>
    </li>
    {% for filter in glossary_filters %}
    <li{% if filter == active_filter %} class="active"{% endif%}>
        <a href="{% url 'chemical_list' %}?filter={{ filter }}&search={{ search }}" data-id="{{ filter }}" >{{ filter }}</a>
    </li>
    {% endfor %}
</ul>

{% if object_list %}
<!-- Chemicals were found, so show them -->
<table class="table chemical-list">
  <tr>
    <th>Name</th>
    <th>Formula</th>
    <th>In stock</th>
  </tr>
  {% for chemical in object_list %}

    {% if chemical.has_expired and chemical.is_in_stock %}
  <tr class="danger">
    {% else %}
  <tr{% if not chemical.is_in_stock %} class="empty"{% endif %}>
    {% endif %}
    <td>
      <a href="{{ chemical.detail_url }}"
	 title="Detailed information on chemical {{ chemical.name|lower }}">
	{{ chemical.name }}</a>
        {% if chemical.has_expired and chemical.is_in_stock %}
      <span class="glyphicon glyphicon-alert red_alert"
	    title="{{ chemical.name }} has an expired container"></span>
        {% endif %}
    </td>
    <td>{{ chemical.formula|formula_markup }}</td>
    <td>
      {% if chemical.is_in_stock %}
      Yes
      {% else %}
      No
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>

{% else %}
<!-- No chemicals were found -->
<div class="alert alert-warning no-chemicals">
  No chemicals match your criteria. Please try another tab or search string.
</div>

{% endif %}

{% endblock %}
