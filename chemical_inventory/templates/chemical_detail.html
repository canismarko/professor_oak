{% extends 'base.html' %}
{% load custom_filters %}
{% block title %}{{ chemical.name }}{% endblock %}

{% block content %}
<h2>{{ chemical.name }}</h2>

<div class="row">
  <div class="col-md-4">

    <p>
      <a href="{{ chemical.edit_url }}"
	 title="Edit chemical information for {{ chemical.name|lower }}" class="btn btn-primary">
	Edit Information</a>
      <a href="{% url 'chemical_list' %}" title="Return to list of chemicals" class="btn btn-link">
	Back</a>
    </p>

    <dl>
      <dt>Formula</dt>
      <dd>{{ chemical.formula|subscript }}</dd>

      <dt>CAS Number</dt>
      <dd>{{ chemical.cas_number }}</dd>

      <!-- <dt>NFPA Hazards</dt> -->
      <!-- <dd>Health: {{ chemical.health }}</dd> -->
      <!-- <dd>Flammability: {{ chemical.flammability }}</dd> -->
      <!-- <dd>Instability: {{ chemical.instability }}</dd> -->
      <!-- <dd>Special Hazards: {{ chemical.special_hazards }}</dd> -->

      <dt>Gloves</dt>
      <dd>{{ chemical.glove }}</dd>

    </dl>

  </div>

  <div class="col-md-4">
      <canvas oak-nfpa-diamond
	      health="{{ chemical.health }}"
	      flammability="{{ chemical.flammability }}"
	      instability="{{ chemical.instability }}"
	      special-hazards="{{ chemical.special_hazards }}">
	<!-- Fallback for those without Javascript -->
	<dl>
	  <dt>NFPA Hazards</dt>
	  <dd>Health: {{ chemical.health }}</dd>
	  <dd>Flammability: {{ chemical.flammability }}</dd>
	  <dd>Instability: {{ chemical.instability }}</dd>
	  <dd>Special Hazards: {{ chemical.special_hazards }}</dd>
	</dl>
      </canvas>
  </div>

  <div class="col-md-4">
    <img src="{{ chemical.structure_url }}"
	 class="img-responsive"
	 title="Chemical structure of {{ chemical.name|lower }}"></img>
  </div>
</div>

<h2>Containers</h2>

<table class="table chemical-list">
  <th>Location</th>
  <th>Quantity</th>
  <th>Expiration Date</th>
  <th>Contact Person</th>
  <th class="text-center">Empty?</th>
  <th></th>
  {% for container in container_list %}
  <tr ng-controller="chemicalList"
      ng-init="chemicalId={{ container.pk }}; isEmpty={{ container.is_empty | lower }}"
      ng-class="{empty: isEmpty}">
    <td>{{ container.location }}</td>
    <td>{{ container.quantity }} {{ container.unit_of_measure }}</td>
    <td>{{ container.expiration_date }}</td>
    <td>
      <a href="mailto:{{ container.owner.email }}"
	 title="Send {{ container.owner.get_short_name }} an email" >
	{{ container.owner.get_full_name }}</a>
    </td>
    <td class="text-center">
      <input type="checkbox"
	     ng-model="isEmpty" ng-change="updateStatus()">
    </td>
    <td>
      <a href="{{ container.edit_url }}"
	 title="Edit this container of {{ chemical.name|lower }}" >
	<span class="glyphicon glyphicon-pencil"></span>
	<!-- Edit -->
      </a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
